{% extends 'base.html' %}

{% block title %}{{ meeting.title }} - Meeting Summarizer{% endblock %}

{% block content %}
<style>
    /* Results Page Styles */
    .results-container {
        padding: 2rem 0 4rem;
    }

    /* Header Section with Glassmorphism */
    .meeting-header {
        background: rgba(255, 255, 255, 0.7);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 24px;
        padding: 2.5rem;
        margin-bottom: 2rem;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        position: relative;
        overflow: hidden;
    }

    [data-theme="dark"] .meeting-header {
        background: rgba(45, 45, 45, 0.7);
        border-color: rgba(255, 255, 255, 0.1);
    }

    .meeting-header::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, #667eea, #764ba2);
    }

    .meeting-title {
        font-size: 2rem;
        font-weight: 800;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 1.5rem;
    }

    .meeting-metadata {
        display: flex;
        align-items: center;
        gap: 2rem;
        flex-wrap: wrap;
        margin-bottom: 1.5rem;
        color: var(--text-secondary);
    }

    .metadata-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.95rem;
    }

    .metadata-item i {
        color: #667eea;
        font-size: 1.1rem;
    }

    .status-badge {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 1.25rem;
        border-radius: 50px;
        font-size: 0.9rem;
        font-weight: 600;
        background: rgba(16, 185, 129, 0.1);
        color: #10b981;
        border: 2px solid #10b981;
        animation: glow 2s ease-in-out infinite;
    }

    @keyframes glow {
        0%, 100% {
            box-shadow: 0 0 10px rgba(16, 185, 129, 0.3);
        }
        50% {
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.6);
        }
    }

    .status-badge i {
        animation: checkmark 0.5s ease-in-out;
    }

    @keyframes checkmark {
        0% { transform: scale(0); }
        50% { transform: scale(1.2); }
        100% { transform: scale(1); }
    }

    /* Action Buttons */
    .action-buttons {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
    }

    .action-btn {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem 1.5rem;
        border-radius: 12px;
        font-weight: 600;
        font-size: 0.95rem;
        border: 2px solid var(--border-color);
        background: var(--bg-primary);
        color: var(--text-primary);
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
    }

    .action-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        border-color: #667eea;
    }

    .action-btn i {
        font-size: 1.1rem;
    }

    .action-btn-delete {
        border-color: #ef4444;
        color: #ef4444;
    }

    .action-btn-delete:hover {
        background: rgba(239, 68, 68, 0.1);
        border-color: #ef4444;
    }

    /* Tooltip */
    .action-btn::after {
        content: attr(data-tooltip);
        position: absolute;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%) translateY(-10px);
        background: rgba(0, 0, 0, 0.9);
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        font-size: 0.85rem;
        white-space: nowrap;
        opacity: 0;
        pointer-events: none;
        transition: all 0.3s ease;
    }

    .action-btn:hover::after {
        opacity: 1;
        transform: translateX(-50%) translateY(-5px);
    }

    /* Tab Navigation */
    .tabs-container {
        margin: 2rem 0;
        position: relative;
    }

    .nav-pills {
        display: flex;
        gap: 1rem;
        padding: 0.5rem;
        background: var(--bg-secondary);
        border-radius: 16px;
        border: 1px solid var(--border-color);
        position: relative;
        overflow-x: auto;
    }

    .nav-pill {
        flex: 1;
        min-width: fit-content;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        padding: 1rem 2rem;
        border-radius: 12px;
        font-weight: 600;
        color: var(--text-secondary);
        background: transparent;
        border: none;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        z-index: 1;
    }

    .nav-pill:hover {
        color: var(--text-primary);
        background: var(--bg-tertiary);
    }

    .nav-pill.active {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        box-shadow: 0 8px 16px rgba(102, 126, 234, 0.3);
    }

    .indicator-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: currentColor;
        opacity: 0.6;
    }

    .nav-pill.active .indicator-dot {
        opacity: 1;
        animation: pulse-dot 2s ease-in-out infinite;
    }

    @keyframes pulse-dot {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.3); }
    }

    .count-badge {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        min-width: 24px;
        height: 24px;
        padding: 0 0.5rem;
        border-radius: 12px;
        background: rgba(255, 255, 255, 0.2);
        font-size: 0.85rem;
        font-weight: 700;
    }

    .nav-pill.active .count-badge {
        background: rgba(255, 255, 255, 0.3);
    }

    /* Tab Content */
    .tab-content {
        margin-top: 2rem;
    }

    .tab-pane {
        display: none;
        animation: fadeIn 0.4s ease;
    }

    .tab-pane.active {
        display: block;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Transcript Section */
    .transcript-container {
        background: rgba(255, 255, 255, 0.5);
        backdrop-filter: blur(10px);
        border: 1px solid var(--border-color);
        border-radius: 20px;
        padding: 2rem;
        position: relative;
    }

    [data-theme="dark"] .transcript-container {
        background: rgba(45, 45, 45, 0.5);
    }

    .transcript-controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
        padding-bottom: 1rem;
        border-bottom: 2px solid var(--border-color);
    }

    .search-box {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        background: var(--bg-secondary);
        border: 2px solid var(--border-color);
        border-radius: 12px;
        padding: 0.5rem 1rem;
        flex: 1;
        max-width: 400px;
    }

    .search-box input {
        border: none;
        background: transparent;
        outline: none;
        font-size: 0.95rem;
        color: var(--text-primary);
        width: 100%;
    }

    .font-controls {
        display: flex;
        gap: 0.5rem;
    }

    .font-control-btn {
        width: 36px;
        height: 36px;
        border-radius: 8px;
        border: 2px solid var(--border-color);
        background: var(--bg-secondary);
        color: var(--text-primary);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .font-control-btn:hover {
        border-color: #667eea;
        background: var(--bg-tertiary);
    }

    .transcript-content {
        max-height: 600px;
        overflow-y: auto;
        padding-right: 1rem;
    }

    /* Custom Scrollbar */
    .transcript-content::-webkit-scrollbar {
        width: 8px;
    }

    .transcript-content::-webkit-scrollbar-track {
        background: var(--bg-tertiary);
        border-radius: 10px;
    }

    .transcript-content::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 10px;
    }

    .transcript-entry {
        display: flex;
        gap: 1.5rem;
        margin-bottom: 2rem;
        padding: 1.5rem;
        background: var(--bg-primary);
        border-radius: 12px;
        border-left: 4px solid transparent;
        transition: all 0.3s ease;
        position: relative;
    }

    .transcript-entry:hover {
        border-left-color: #667eea;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .timestamp {
        font-size: 0.85rem;
        color: var(--text-secondary);
        font-weight: 600;
        min-width: 80px;
        font-family: 'Courier New', monospace;
    }

    .transcript-text {
        flex: 1;
    }

    .speaker-name {
        font-weight: 700;
        font-size: 1.05rem;
        margin-bottom: 0.5rem;
        color: #667eea;
    }

    .speaker-name.speaker-1 { color: #667eea; }
    .speaker-name.speaker-2 { color: #f59e0b; }
    .speaker-name.speaker-3 { color: #10b981; }
    .speaker-name.speaker-4 { color: #ef4444; }

    .text-content {
        line-height: 1.8;
        color: var(--text-primary);
        font-size: 1rem;
    }

    .copy-paragraph-btn {
        position: absolute;
        right: 1rem;
        top: 1rem;
        width: 32px;
        height: 32px;
        border-radius: 8px;
        border: none;
        background: var(--bg-secondary);
        color: var(--text-secondary);
        cursor: pointer;
        opacity: 0;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .transcript-entry:hover .copy-paragraph-btn {
        opacity: 1;
    }

    .copy-paragraph-btn:hover {
        background: #667eea;
        color: white;
    }

    /* Summary Section */
    .summary-container {
        display: grid;
        gap: 2rem;
    }

    .executive-summary {
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-left: 6px solid;
        border-image: linear-gradient(135deg, #667eea 0%, #764ba2 100%) 1;
        border-radius: 16px;
        padding: 2.5rem;
        position: relative;
    }

    .quote-icon {
        position: absolute;
        top: 2rem;
        left: 2rem;
        font-size: 4rem;
        color: #667eea;
        opacity: 0.15;
    }

    .executive-summary h3 {
        font-size: 1.5rem;
        margin-bottom: 1.5rem;
        color: var(--text-primary);
        position: relative;
        z-index: 1;
    }

    .summary-text {
        font-size: 1.125rem;
        line-height: 1.8;
        color: var(--text-primary);
        position: relative;
        z-index: 1;
    }

    .copy-summary-btn {
        position: absolute;
        top: 2rem;
        right: 2rem;
        width: 40px;
        height: 40px;
        border-radius: 10px;
        border: 2px solid var(--border-color);
        background: var(--bg-primary);
        color: var(--text-primary);
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .copy-summary-btn:hover {
        background: #667eea;
        color: white;
        border-color: #667eea;
        transform: scale(1.1);
    }

    /* Key Decisions */
    .key-decisions h3 {
        font-size: 1.75rem;
        margin-bottom: 1.5rem;
        color: var(--text-primary);
    }

    .decisions-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 1.5rem;
    }

    .decision-card {
        background: var(--bg-secondary);
        border: 2px solid var(--border-color);
        border-radius: 16px;
        padding: 1.75rem;
        transition: all 0.3s ease;
        position: relative;
        counter-increment: decision-counter;
    }

    .decision-card::before {
        content: counter(decision-counter);
        position: absolute;
        top: 1.5rem;
        right: 1.5rem;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 0.9rem;
    }

    .decisions-grid {
        counter-reset: decision-counter;
    }

    .decision-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
        border-color: #667eea;
    }

    .decision-icon {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.5rem;
        margin-bottom: 1rem;
    }

    .decision-text {
        font-size: 1.05rem;
        line-height: 1.6;
        color: var(--text-primary);
        margin-bottom: 1rem;
    }

    .decision-time {
        font-size: 0.85rem;
        color: var(--text-secondary);
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    /* Discussion Topics */
    .discussion-topics h3 {
        font-size: 1.75rem;
        margin-bottom: 1.5rem;
        color: var(--text-primary);
    }

    .topics-cloud {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
    }

    .topic-tag {
        padding: 0.75rem 1.5rem;
        border-radius: 50px;
        font-weight: 600;
        font-size: 0.95rem;
        border: 2px solid;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .topic-tag:nth-child(1) {
        background: rgba(102, 126, 234, 0.1);
        color: #667eea;
        border-color: #667eea;
    }

    .topic-tag:nth-child(2) {
        background: rgba(245, 158, 11, 0.1);
        color: #f59e0b;
        border-color: #f59e0b;
    }

    .topic-tag:nth-child(3) {
        background: rgba(16, 185, 129, 0.1);
        color: #10b981;
        border-color: #10b981;
    }

    .topic-tag:nth-child(4) {
        background: rgba(239, 68, 68, 0.1);
        color: #ef4444;
        border-color: #ef4444;
    }

    .topic-tag:nth-child(5) {
        background: rgba(139, 92, 246, 0.1);
        color: #8b5cf6;
        border-color: #8b5cf6;
    }

    .topic-tag:hover {
        transform: scale(1.1);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    /* Meeting Insights */
    .meeting-insights {
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: 16px;
        padding: 2rem;
    }

    .meeting-insights h3 {
        font-size: 1.75rem;
        margin-bottom: 2rem;
        color: var(--text-primary);
    }

    .insights-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 2rem;
    }

    .insight-item {
        text-align: center;
    }

    .insight-circle {
        width: 120px;
        height: 120px;
        margin: 0 auto 1rem;
        border-radius: 50%;
        background: conic-gradient(#667eea 0deg, #764ba2 var(--progress), var(--bg-tertiary) var(--progress));
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
    }

    .insight-circle::before {
        content: '';
        width: 90px;
        height: 90px;
        background: var(--bg-primary);
        border-radius: 50%;
        position: absolute;
    }

    .insight-value {
        font-size: 1.75rem;
        font-weight: 700;
        color: var(--text-primary);
        position: relative;
        z-index: 1;
    }

    .insight-label {
        font-size: 0.95rem;
        color: var(--text-secondary);
        font-weight: 600;
    }

    /* Action Items Tab */
    .actions-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
    }

    .bulk-actions {
        display: flex;
        gap: 1rem;
        align-items: center;
        padding: 1rem;
        background: var(--bg-secondary);
        border-radius: 12px;
        border: 2px solid var(--border-color);
    }

    .bulk-actions label {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-weight: 600;
        color: var(--text-primary);
        cursor: pointer;
    }

    .bulk-action-btn {
        padding: 0.5rem 1rem;
        border-radius: 8px;
        border: 2px solid var(--border-color);
        background: var(--bg-primary);
        color: var(--text-primary);
        font-weight: 600;
        font-size: 0.9rem;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .bulk-action-btn:hover {
        background: var(--bg-tertiary);
        border-color: #667eea;
    }

    /* Action Items Table */
    .action-items-table {
        background: var(--bg-secondary);
        border-radius: 16px;
        overflow: hidden;
        border: 1px solid var(--border-color);
    }

    .table-header {
        display: grid;
        grid-template-columns: 50px 100px 2fr 150px 150px 120px 80px;
        gap: 1rem;
        padding: 1.25rem 1.5rem;
        background: var(--bg-tertiary);
        border-bottom: 2px solid var(--border-color);
        font-weight: 700;
        font-size: 0.9rem;
        color: var(--text-secondary);
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .action-item-row {
        display: grid;
        grid-template-columns: 50px 100px 2fr 150px 150px 120px 80px;
        gap: 1rem;
        padding: 1.5rem;
        border-bottom: 1px solid var(--border-color);
        align-items: center;
        background: var(--bg-primary);
        transition: all 0.3s ease;
    }

    .action-item-row:hover {
        background: var(--bg-secondary);
        transform: translateX(4px);
    }

    .action-item-row.completed {
        opacity: 0.6;
    }

    .action-item-row.completed .task-text {
        text-decoration: line-through;
    }

    /* Custom Checkbox */
    .custom-checkbox {
        width: 24px;
        height: 24px;
        border: 2px solid var(--border-color);
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
    }

    .custom-checkbox input {
        position: absolute;
        opacity: 0;
        cursor: pointer;
    }

    .custom-checkbox input:checked + .checkmark {
        display: block;
    }

    .custom-checkbox:hover {
        border-color: #667eea;
        background: rgba(102, 126, 234, 0.1);
    }

    .checkmark {
        display: none;
        color: #667eea;
        font-weight: 900;
    }

    /* Priority Badge */
    .priority-badge {
        padding: 0.4rem 0.8rem;
        border-radius: 6px;
        font-size: 0.8rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        text-align: center;
    }

    .priority-high {
        background: rgba(239, 68, 68, 0.15);
        color: #ef4444;
        border: 1px solid #ef4444;
    }

    .priority-medium {
        background: rgba(245, 158, 11, 0.15);
        color: #f59e0b;
        border: 1px solid #f59e0b;
    }

    .priority-low {
        background: rgba(59, 130, 246, 0.15);
        color: #3b82f6;
        border: 1px solid #3b82f6;
    }

    /* Task Text */
    .task-text {
        font-weight: 600;
        color: var(--text-primary);
        line-height: 1.5;
    }

    /* Assignee */
    .assignee {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .assignee-avatar {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 700;
        font-size: 0.85rem;
    }

    .assignee-name {
        font-size: 0.9rem;
        color: var(--text-primary);
        font-weight: 600;
    }

    /* Deadline */
    .deadline {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.9rem;
        color: var(--text-secondary);
    }

    .deadline.urgent {
        color: #ef4444;
        font-weight: 600;
    }

    .deadline.upcoming {
        color: #f59e0b;
        font-weight: 600;
    }

    /* Status Dropdown */
    .status-select {
        padding: 0.5rem 0.75rem;
        border-radius: 8px;
        border: 2px solid var(--border-color);
        background: var(--bg-secondary);
        color: var(--text-primary);
        font-weight: 600;
        font-size: 0.85rem;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .status-select:hover {
        border-color: #667eea;
    }

    .status-select option {
        background: var(--bg-primary);
    }

    /* Row Actions */
    .row-actions {
        display: flex;
        gap: 0.5rem;
    }

    .row-action-btn {
        width: 32px;
        height: 32px;
        border-radius: 6px;
        border: none;
        background: var(--bg-secondary);
        color: var(--text-secondary);
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .row-action-btn:hover {
        background: #667eea;
        color: white;
        transform: scale(1.1);
    }

    .row-action-btn.delete:hover {
        background: #ef4444;
    }

    /* Floating Action Button */
    .fab {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        width: 64px;
        height: 64px;
        border-radius: 50%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        cursor: pointer;
        box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.75rem;
        transition: all 0.3s ease;
        z-index: 100;
    }

    .fab:hover {
        transform: scale(1.1) rotate(90deg);
        box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
    }

    /* Sidebar */
    .results-layout {
        display: grid;
        grid-template-columns: 1fr 350px;
        gap: 2rem;
    }

    .main-content {
        min-width: 0;
    }

    .sidebar {
        position: sticky;
        top: 2rem;
        height: fit-content;
    }

    .sidebar-card {
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: 16px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
    }

    .sidebar-card h4 {
        font-size: 1.1rem;
        margin-bottom: 1rem;
        color: var(--text-primary);
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .sidebar-card h4 i {
        color: #667eea;
    }

    .metadata-list {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
    }

    .metadata-row {
        display: flex;
        justify-content: space-between;
        padding: 0.5rem 0;
        border-bottom: 1px solid var(--border-color);
    }

    .metadata-label {
        color: var(--text-secondary);
        font-size: 0.9rem;
    }

    .metadata-value {
        color: var(--text-primary);
        font-weight: 600;
        font-size: 0.9rem;
    }

    /* Participants List */
    .participant-item {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.75rem;
        border-radius: 8px;
        margin-bottom: 0.5rem;
        background: var(--bg-primary);
        border: 1px solid var(--border-color);
        transition: all 0.3s ease;
    }

    .participant-item:hover {
        background: var(--bg-tertiary);
        transform: translateX(4px);
    }

    .participant-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 700;
    }

    .participant-info {
        flex: 1;
    }

    .participant-name {
        font-weight: 600;
        color: var(--text-primary);
        font-size: 0.95rem;
    }

    .participant-role {
        font-size: 0.8rem;
        color: var(--text-secondary);
    }

    /* Tags */
    .tags-list {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
    }

    .tag {
        padding: 0.4rem 0.9rem;
        border-radius: 50px;
        background: rgba(102, 126, 234, 0.1);
        color: #667eea;
        border: 1px solid #667eea;
        font-size: 0.85rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .tag:hover {
        background: #667eea;
        color: white;
        transform: scale(1.05);
    }

    /* Related Meetings */
    .related-meeting {
        padding: 1rem;
        background: var(--bg-primary);
        border: 1px solid var(--border-color);
        border-radius: 12px;
        margin-bottom: 0.75rem;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .related-meeting:hover {
        border-color: #667eea;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        transform: translateX(4px);
    }

    .related-meeting-title {
        font-weight: 600;
        color: var(--text-primary);
        font-size: 0.95rem;
        margin-bottom: 0.5rem;
    }

    .related-meeting-date {
        font-size: 0.8rem;
        color: var(--text-secondary);
        display: flex;
        align-items: center;
        gap: 0.25rem;
    }

    /* Quick Actions */
    .quick-action-btn {
        width: 100%;
        padding: 0.75rem;
        border-radius: 8px;
        border: 2px solid var(--border-color);
        background: var(--bg-primary);
        color: var(--text-primary);
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        justify-content: center;
    }

    .quick-action-btn:hover {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-color: transparent;
        transform: translateY(-2px);
    }

    /* Loading Skeleton */
    .skeleton {
        background: linear-gradient(90deg, var(--bg-tertiary) 25%, var(--bg-secondary) 50%, var(--bg-tertiary) 75%);
        background-size: 200% 100%;
        animation: shimmer 1.5s infinite;
        border-radius: 8px;
    }

    @keyframes shimmer {
        0% { background-position: 200% 0; }
        100% { background-position: -200% 0; }
    }

    /* Slide-up Animation */
    @keyframes slideUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .slide-up {
        animation: slideUp 0.5s ease;
    }

    /* Responsive Design */
    @media (max-width: 1200px) {
        .results-layout {
            grid-template-columns: 1fr;
        }

        .sidebar {
            position: relative;
            top: 0;
        }
    }

    @media (max-width: 768px) {
        .meeting-title {
            font-size: 1.75rem;
        }

        .meeting-metadata {
            gap: 1rem;
        }

        .action-buttons {
            flex-direction: column;
        }

        .action-btn {
            width: 100%;
            justify-content: center;
        }

        .nav-pills {
            gap: 0.5rem;
        }

        .nav-pill {
            padding: 0.75rem 1rem;
            font-size: 0.9rem;
        }

        .transcript-entry {
            flex-direction: column;
            gap: 0.75rem;
        }

        .timestamp {
            min-width: auto;
        }

        .decisions-grid {
            grid-template-columns: 1fr;
        }

        .insights-grid {
            grid-template-columns: 1fr;
        }

        /* Action Items Table Mobile */
        .table-header {
            display: none;
        }

        .action-item-row {
            grid-template-columns: 1fr;
            gap: 1rem;
            padding: 1.25rem;
        }

        .action-item-row > * {
            grid-column: 1;
        }

        .task-text {
            font-size: 1.05rem;
        }

        .bulk-actions {
            flex-direction: column;
            align-items: stretch;
        }

        .fab {
            bottom: 1rem;
            right: 1rem;
            width: 56px;
            height: 56px;
        }

        .sidebar {
            display: none;
        }
    }

</style>

<div class="results-container">
    <div class="container">
        <div class="results-layout">
            <div class="main-content">
        <!-- Meeting Header -->
        <div class="meeting-header">
            <h1 class="meeting-title">{{ meeting.title|default("Q4 Planning Strategy Meeting") }}</h1>
            
            <div class="meeting-metadata">
                <div class="metadata-item">
                    <i class="bi bi-calendar3"></i>
                    <span>{{ meeting.date|default("October 13, 2025") }}</span>
                </div>
                <div class="metadata-item">
                    <i class="bi bi-clock"></i>
                    <span>{{ meeting.duration|default("45 minutes") }}</span>
                </div>
                <div class="metadata-item">
                    <span class="status-badge">
                        <i class="bi bi-check-circle-fill"></i>
                        Completed
                    </span>
                </div>
            </div>

            <div class="action-buttons">
                <button class="action-btn" data-tooltip="Copy all content" onclick="copyAll()">
                    <i class="bi bi-clipboard"></i>
                    Copy All
                </button>
                <button class="action-btn" data-tooltip="Download as PDF" onclick="downloadPDF()">
                    <i class="bi bi-file-earmark-pdf"></i>
                    Download PDF
                </button>
                <button class="action-btn" data-tooltip="Share meeting" onclick="shareMeeting()">
                    <i class="bi bi-share"></i>
                    Share
                </button>
                <button class="action-btn action-btn-delete" data-tooltip="Delete meeting" onclick="confirmDelete()">
                    <i class="bi bi-trash"></i>
                    Delete
                </button>
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="tabs-container">
            <div class="nav-pills" role="tablist">
                <button class="nav-pill active" data-tab="transcript" role="tab" aria-selected="true">
                    📝 Transcript
                    <span class="indicator-dot"></span>
                </button>
                <button class="nav-pill" data-tab="summary" role="tab" aria-selected="false">
                    📊 Summary
                    <span class="indicator-dot"></span>
                </button>
                <button class="nav-pill" data-tab="actions" role="tab" aria-selected="false">
                    ✅ Action Items
                    <span class="count-badge">{{ action_items|length|default(7) }}</span>
                </button>
            </div>
        </div>

        <!-- Tab Content -->
        <div class="tab-content">
            <!-- Transcript Tab -->
            <div class="tab-pane active" id="transcript" role="tabpanel">
                <div class="transcript-container">
                    <div class="transcript-controls">
                        <div class="search-box">
                            <i class="bi bi-search"></i>
                            <input type="text" placeholder="Search transcript..." id="searchInput">
                        </div>
                        <div class="font-controls">
                            <button class="font-control-btn" onclick="decreaseFont()" title="Decrease font size">
                                <i class="bi bi-dash-lg"></i>
                            </button>
                            <button class="font-control-btn" onclick="increaseFont()" title="Increase font size">
                                <i class="bi bi-plus-lg"></i>
                            </button>
                            <button class="font-control-btn" onclick="toggleMonospace()" title="Toggle monospace font">
                                <i class="bi bi-code"></i>
                            </button>
                        </div>
                    </div>

                    <div class="transcript-content" id="transcriptContent">
                        <div class="transcript-entry">
                            <div class="timestamp">00:00</div>
                            <div class="transcript-text">
                                <div class="speaker-name speaker-1">Sarah Chen (Product Manager)</div>
                                <p class="text-content">Good morning everyone! Thanks for joining today's Q4 planning meeting. We have a lot to cover, so let's dive right in. Our main agenda includes reviewing Q3 performance, setting Q4 objectives, and discussing resource allocation for the upcoming product launches.</p>
                            </div>
                            <button class="copy-paragraph-btn" onclick="copyParagraph(this)">
                                <i class="bi bi-clipboard"></i>
                            </button>
                        </div>

                        <div class="transcript-entry">
                            <div class="timestamp">00:32</div>
                            <div class="transcript-text">
                                <div class="speaker-name speaker-2">Michael Rodriguez (Engineering Lead)</div>
                                <p class="text-content">Thanks Sarah. From the engineering perspective, Q3 was challenging but productive. We successfully delivered the mobile app redesign two weeks ahead of schedule, which freed up resources for the API improvements. However, we did encounter some technical debt that we need to address in Q4.</p>
                            </div>
                            <button class="copy-paragraph-btn" onclick="copyParagraph(this)">
                                <i class="bi bi-clipboard"></i>
                            </button>
                        </div>

                        <div class="transcript-entry">
                            <div class="timestamp">01:15</div>
                            <div class="transcript-text">
                                <div class="speaker-name speaker-3">Jennifer Park (Marketing Director)</div>
                                <p class="text-content">I'd like to add that the mobile app redesign has already shown promising results. We've seen a 23% increase in user engagement and our app store rating improved from 4.2 to 4.7 stars. This positions us well for the holiday season campaigns we're planning for Q4.</p>
                            </div>
                            <button class="copy-paragraph-btn" onclick="copyParagraph(this)">
                                <i class="bi bi-clipboard"></i>
                            </button>
                        </div>

                        <div class="transcript-entry">
                            <div class="timestamp">02:05</div>
                            <div class="transcript-text">
                                <div class="speaker-name speaker-1">Sarah Chen (Product Manager)</div>
                                <p class="text-content">Excellent work team! Now, for Q4, I propose we focus on three key initiatives: First, launching the premium tier subscription model. Second, implementing the AI-powered recommendation engine. And third, expanding our integration ecosystem with at least five new third-party tools. What are your thoughts on this roadmap?</p>
                            </div>
                            <button class="copy-paragraph-btn" onclick="copyParagraph(this)">
                                <i class="bi bi-clipboard"></i>
                            </button>
                        </div>

                        <div class="transcript-entry">
                            <div class="timestamp">03:00</div>
                            <div class="transcript-text">
                                <div class="speaker-name speaker-4">David Thompson (Sales VP)</div>
                                <p class="text-content">From a sales perspective, the premium tier is crucial. We've had over 200 enterprise clients asking about advanced features. The AI recommendations will be a game-changer for retention. I'd suggest we prioritize getting a beta version ready by mid-November to test with our top 10 clients before the full launch.</p>
                            </div>
                            <button class="copy-paragraph-btn" onclick="copyParagraph(this)">
                                <i class="bi bi-clipboard"></i>
                            </button>
                        </div>

                        <div class="transcript-entry">
                            <div class="timestamp">04:12</div>
                            <div class="transcript-text">
                                <div class="speaker-name speaker-2">Michael Rodriguez (Engineering Lead)</div>
                                <p class="text-content">Agreed on the timeline. We'll need to allocate at least two senior engineers to the AI recommendation project and three to the premium tier infrastructure. I'm also concerned about the integration ecosystem - we should be realistic about five integrations in one quarter given our current team size.</p>
                            </div>
                            <button class="copy-paragraph-btn" onclick="copyParagraph(this)">
                                <i class="bi bi-clipboard"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Summary Tab -->
            <div class="tab-pane" id="summary" role="tabpanel">
                <div class="summary-container">
                    <!-- Executive Summary -->
                    <div class="executive-summary">
                        <i class="bi bi-quote quote-icon"></i>
                        <h3>Executive Summary</h3>
                        <p class="summary-text">
                            The Q4 Planning Strategy Meeting focused on reviewing Q3 achievements and setting ambitious goals for the final quarter. The team successfully delivered the mobile app redesign ahead of schedule, resulting in a 23% increase in user engagement. For Q4, three key initiatives were proposed: launching a premium subscription tier, implementing an AI-powered recommendation engine, and expanding the integration ecosystem. The sales team emphasized strong enterprise demand for advanced features, while engineering highlighted the need for realistic resource allocation. A beta testing phase with top clients was agreed upon for mid-November, with careful consideration of team capacity for the planned integrations.
                        </p>
                        <button class="copy-summary-btn" onclick="copySummary()">
                            <i class="bi bi-clipboard"></i>
                        </button>
                    </div>

                    <!-- Key Decisions -->
                    <div class="key-decisions">
                        <h3>Key Decisions</h3>
                        <div class="decisions-grid">
                            <div class="decision-card">
                                <div class="decision-icon">
                                    <i class="bi bi-check-circle"></i>
                                </div>
                                <p class="decision-text">Launch premium tier subscription model as top Q4 priority</p>
                                <div class="decision-time">
                                    <i class="bi bi-clock"></i>
                                    <span>02:05</span>
                                </div>
                            </div>

                            <div class="decision-card">
                                <div class="decision-icon">
                                    <i class="bi bi-check-circle"></i>
                                </div>
                                <p class="decision-text">Implement AI-powered recommendation engine for improved retention</p>
                                <div class="decision-time">
                                    <i class="bi bi-clock"></i>
                                    <span>02:05</span>
                                </div>
                            </div>

                            <div class="decision-card">
                                <div class="decision-icon">
                                    <i class="bi bi-check-circle"></i>
                                </div>
                                <p class="decision-text">Beta testing with top 10 clients scheduled for mid-November</p>
                                <div class="decision-time">
                                    <i class="bi bi-clock"></i>
                                    <span>03:00</span>
                                </div>
                            </div>

                            <div class="decision-card">
                                <div class="decision-icon">
                                    <i class="bi bi-check-circle"></i>
                                </div>
                                <p class="decision-text">Allocate 2 senior engineers to AI project, 3 to premium tier infrastructure</p>
                                <div class="decision-time">
                                    <i class="bi bi-clock"></i>
                                    <span>04:12</span>
                                </div>
                            </div>

                            <div class="decision-card">
                                <div class="decision-icon">
                                    <i class="bi bi-check-circle"></i>
                                </div>
                                <p class="decision-text">Reassess integration ecosystem goals based on team capacity</p>
                                <div class="decision-time">
                                    <i class="bi bi-clock"></i>
                                    <span>04:12</span>
                                </div>
                            </div>

                            <div class="decision-card">
                                <div class="decision-icon">
                                    <i class="bi bi-check-circle"></i>
                                </div>
                                <p class="decision-text">Leverage Q3 mobile app success for holiday season campaigns</p>
                                <div class="decision-time">
                                    <i class="bi bi-clock"></i>
                                    <span>01:15</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Discussion Topics -->
                    <div class="discussion-topics">
                        <h3>Discussion Topics</h3>
                        <div class="topics-cloud">
                            <span class="topic-tag">Q4 Strategy</span>
                            <span class="topic-tag">Premium Subscription</span>
                            <span class="topic-tag">AI Recommendations</span>
                            <span class="topic-tag">Resource Allocation</span>
                            <span class="topic-tag">Enterprise Clients</span>
                        </div>
                    </div>

                    <!-- Meeting Insights -->
                    <div class="meeting-insights">
                        <h3>Meeting Insights</h3>
                        <div class="insights-grid">
                            <div class="insight-item">
                                <div class="insight-circle" style="--progress: 270deg">
                                    <div class="insight-value">1,847</div>
                                </div>
                                <div class="insight-label">Word Count</div>
                            </div>
                            <div class="insight-item">
                                <div class="insight-circle" style="--progress: 162deg">
                                    <div class="insight-value">45m</div>
                                </div>
                                <div class="insight-label">Duration</div>
                            </div>
                            <div class="insight-item">
                                <div class="insight-circle" style="--progress: 216deg">
                                    <div class="insight-value">4</div>
                                </div>
                                <div class="insight-label">Participants</div>
                            </div>
                            <div class="insight-item">
                                <div class="insight-circle" style="--progress: 252deg">
                                    <div class="insight-value">6</div>
                                </div>
                                <div class="insight-label">Key Decisions</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Items Tab - Will be implemented in second half -->
            <div class="tab-pane" id="actions" role="tabpanel">
                <!-- Bulk Actions Toolbar -->
                <div class="actions-header">
                    <div class="bulk-actions">
                        <label>
                            <input type="checkbox" id="selectAll" onchange="toggleSelectAll()">
                            <span>Select All</span>
                        </label>
                        <button class="bulk-action-btn" onclick="markComplete()">
                            <i class="bi bi-check-all"></i> Mark Complete
                        </button>
                        <button class="bulk-action-btn" onclick="bulkAssign()">
                            <i class="bi bi-person-plus"></i> Assign to...
                        </button>
                        <button class="bulk-action-btn" onclick="bulkDeadline()">
                            <i class="bi bi-calendar-plus"></i> Set Deadline
                        </button>
                        <button class="bulk-action-btn" onclick="exportSelected()">
                            <i class="bi bi-download"></i> Export
                        </button>
                    </div>
                </div>

                <!-- Action Items Table -->
                <div class="action-items-table slide-up">
                    <div class="table-header">
                        <div></div>
                        <div>Priority</div>
                        <div>Task</div>
                        <div>Assignee</div>
                        <div>Deadline</div>
                        <div>Status</div>
                        <div>Actions</div>
                    </div>

                    <!-- Action Item 1 -->
                    <div class="action-item-row">
                        <div class="custom-checkbox">
                            <input type="checkbox" class="item-checkbox">
                            <span class="checkmark">✓</span>
                        </div>
                        <div>
                            <span class="priority-badge priority-high">High</span>
                        </div>
                        <div class="task-text">Allocate 2 senior engineers to AI recommendation project</div>
                        <div class="assignee">
                            <div class="assignee-avatar">MR</div>
                            <span class="assignee-name">M. Rodriguez</span>
                        </div>
                        <div class="deadline urgent">
                            <i class="bi bi-calendar-x"></i>
                            <span>Oct 15, 2025</span>
                        </div>
                        <div>
                            <select class="status-select">
                                <option>To Do</option>
                                <option>In Progress</option>
                                <option>Done</option>
                            </select>
                        </div>
                        <div class="row-actions">
                            <button class="row-action-btn" onclick="editTask(this)" title="Edit">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="row-action-btn delete" onclick="deleteTask(this)" title="Delete">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Action Item 2 -->
                    <div class="action-item-row">
                        <div class="custom-checkbox">
                            <input type="checkbox" class="item-checkbox">
                            <span class="checkmark">✓</span>
                        </div>
                        <div>
                            <span class="priority-badge priority-high">High</span>
                        </div>
                        <div class="task-text">Prepare beta version of premium tier for mid-November</div>
                        <div class="assignee">
                            <div class="assignee-avatar">SC</div>
                            <span class="assignee-name">S. Chen</span>
                        </div>
                        <div class="deadline urgent">
                            <i class="bi bi-calendar-x"></i>
                            <span>Nov 15, 2025</span>
                        </div>
                        <div>
                            <select class="status-select">
                                <option>To Do</option>
                                <option selected>In Progress</option>
                                <option>Done</option>
                            </select>
                        </div>
                        <div class="row-actions">
                            <button class="row-action-btn" onclick="editTask(this)" title="Edit">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="row-action-btn delete" onclick="deleteTask(this)" title="Delete">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Action Item 3 -->
                    <div class="action-item-row">
                        <div class="custom-checkbox">
                            <input type="checkbox" class="item-checkbox">
                            <span class="checkmark">✓</span>
                        </div>
                        <div>
                            <span class="priority-badge priority-medium">Medium</span>
                        </div>
                        <div class="task-text">Schedule beta testing with top 10 enterprise clients</div>
                        <div class="assignee">
                            <div class="assignee-avatar">DT</div>
                            <span class="assignee-name">D. Thompson</span>
                        </div>
                        <div class="deadline upcoming">
                            <i class="bi bi-calendar-event"></i>
                            <span>Oct 25, 2025</span>
                        </div>
                        <div>
                            <select class="status-select">
                                <option selected>To Do</option>
                                <option>In Progress</option>
                                <option>Done</option>
                            </select>
                        </div>
                        <div class="row-actions">
                            <button class="row-action-btn" onclick="editTask(this)" title="Edit">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="row-action-btn delete" onclick="deleteTask(this)" title="Delete">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Action Item 4 -->
                    <div class="action-item-row">
                        <div class="custom-checkbox">
                            <input type="checkbox" class="item-checkbox">
                            <span class="checkmark">✓</span>
                        </div>
                        <div>
                            <span class="priority-badge priority-medium">Medium</span>
                        </div>
                        <div class="task-text">Launch holiday season marketing campaigns leveraging mobile app success</div>
                        <div class="assignee">
                            <div class="assignee-avatar">JP</div>
                            <span class="assignee-name">J. Park</span>
                        </div>
                        <div class="deadline upcoming">
                            <i class="bi bi-calendar-event"></i>
                            <span>Nov 1, 2025</span>
                        </div>
                        <div>
                            <select class="status-select">
                                <option>To Do</option>
                                <option selected>In Progress</option>
                                <option>Done</option>
                            </select>
                        </div>
                        <div class="row-actions">
                            <button class="row-action-btn" onclick="editTask(this)" title="Edit">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="row-action-btn delete" onclick="deleteTask(this)" title="Delete">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Action Item 5 -->
                    <div class="action-item-row">
                        <div class="custom-checkbox">
                            <input type="checkbox" class="item-checkbox">
                            <span class="checkmark">✓</span>
                        </div>
                        <div>
                            <span class="priority-badge priority-low">Low</span>
                        </div>
                        <div class="task-text">Reassess integration ecosystem goals based on team capacity</div>
                        <div class="assignee">
                            <div class="assignee-avatar">MR</div>
                            <span class="assignee-name">M. Rodriguez</span>
                        </div>
                        <div class="deadline">
                            <i class="bi bi-calendar"></i>
                            <span>Nov 30, 2025</span>
                        </div>
                        <div>
                            <select class="status-select">
                                <option selected>To Do</option>
                                <option>In Progress</option>
                                <option>Done</option>
                            </select>
                        </div>
                        <div class="row-actions">
                            <button class="row-action-btn" onclick="editTask(this)" title="Edit">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="row-action-btn delete" onclick="deleteTask(this)" title="Delete">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Action Item 6 -->
                    <div class="action-item-row">
                        <div class="custom-checkbox">
                            <input type="checkbox" class="item-checkbox">
                            <span class="checkmark">✓</span>
                        </div>
                        <div>
                            <span class="priority-badge priority-medium">Medium</span>
                        </div>
                        <div class="task-text">Document Q3 technical debt for Q4 addressing</div>
                        <div class="assignee">
                            <div class="assignee-avatar">MR</div>
                            <span class="assignee-name">M. Rodriguez</span>
                        </div>
                        <div class="deadline upcoming">
                            <i class="bi bi-calendar-event"></i>
                            <span>Oct 20, 2025</span>
                        </div>
                        <div>
                            <select class="status-select">
                                <option>To Do</option>
                                <option selected>In Progress</option>
                                <option>Done</option>
                            </select>
                        </div>
                        <div class="row-actions">
                            <button class="row-action-btn" onclick="editTask(this)" title="Edit">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="row-action-btn delete" onclick="deleteTask(this)" title="Delete">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Action Item 7 -->
                    <div class="action-item-row completed">
                        <div class="custom-checkbox">
                            <input type="checkbox" class="item-checkbox" checked>
                            <span class="checkmark">✓</span>
                        </div>
                        <div>
                            <span class="priority-badge priority-high">High</span>
                        </div>
                        <div class="task-text">Complete mobile app redesign delivery</div>
                        <div class="assignee">
                            <div class="assignee-avatar">MR</div>
                            <span class="assignee-name">M. Rodriguez</span>
                        </div>
                        <div class="deadline">
                            <i class="bi bi-calendar-check"></i>
                            <span>Sep 30, 2025</span>
                        </div>
                        <div>
                            <select class="status-select">
                                <option>To Do</option>
                                <option>In Progress</option>
                                <option selected>Done</option>
                            </select>
                        </div>
                        <div class="row-actions">
                            <button class="row-action-btn" onclick="editTask(this)" title="Edit">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="row-action-btn delete" onclick="deleteTask(this)" title="Delete">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Floating Action Button -->
                <button class="fab" onclick="addNewTask()" title="Add new action item" aria-label="Add new action item">
                    <i class="bi bi-plus-lg"></i>
                </button>
            </div>
        </div>
            </div>

            <!-- Sidebar (Desktop Only) -->
            <aside class="sidebar">
                <!-- Meeting Metadata Card -->
                <div class="sidebar-card slide-up">
                    <h4>
                        <i class="bi bi-info-circle"></i>
                        Meeting Details
                    </h4>
                    <div class="metadata-list">
                        <div class="metadata-row">
                            <span class="metadata-label">Created</span>
                            <span class="metadata-value">Oct 13, 2025</span>
                        </div>
                        <div class="metadata-row">
                            <span class="metadata-label">Duration</span>
                            <span class="metadata-value">45 minutes</span>
                        </div>
                        <div class="metadata-row">
                            <span class="metadata-label">File Size</span>
                            <span class="metadata-value">12.4 MB</span>
                        </div>
                        <div class="metadata-row">
                            <span class="metadata-label">Format</span>
                            <span class="metadata-value">MP3</span>
                        </div>
                        <div class="metadata-row">
                            <span class="metadata-label">Word Count</span>
                            <span class="metadata-value">1,847</span>
                        </div>
                    </div>
                </div>

                <!-- Participants Card -->
                <div class="sidebar-card slide-up" style="animation-delay: 0.1s">
                    <h4>
                        <i class="bi bi-people"></i>
                        Participants (4)
                    </h4>
                    <div class="participant-item">
                        <div class="participant-avatar">SC</div>
                        <div class="participant-info">
                            <div class="participant-name">Sarah Chen</div>
                            <div class="participant-role">Product Manager</div>
                        </div>
                    </div>
                    <div class="participant-item">
                        <div class="participant-avatar">MR</div>
                        <div class="participant-info">
                            <div class="participant-name">Michael Rodriguez</div>
                            <div class="participant-role">Engineering Lead</div>
                        </div>
                    </div>
                    <div class="participant-item">
                        <div class="participant-avatar">JP</div>
                        <div class="participant-info">
                            <div class="participant-name">Jennifer Park</div>
                            <div class="participant-role">Marketing Director</div>
                        </div>
                    </div>
                    <div class="participant-item">
                        <div class="participant-avatar">DT</div>
                        <div class="participant-info">
                            <div class="participant-name">David Thompson</div>
                            <div class="participant-role">Sales VP</div>
                        </div>
                    </div>
                </div>

                <!-- Tags Card -->
                <div class="sidebar-card slide-up" style="animation-delay: 0.2s">
                    <h4>
                        <i class="bi bi-tags"></i>
                        Tags
                    </h4>
                    <div class="tags-list">
                        <span class="tag">Q4 Planning</span>
                        <span class="tag">Strategy</span>
                        <span class="tag">Product</span>
                        <span class="tag">Enterprise</span>
                    </div>
                </div>

                <!-- Related Meetings Card -->
                <div class="sidebar-card slide-up" style="animation-delay: 0.3s">
                    <h4>
                        <i class="bi bi-clock-history"></i>
                        Related Meetings
                    </h4>
                    <div class="related-meeting" onclick="window.location.href='/meeting/2'">
                        <div class="related-meeting-title">Q3 Performance Review</div>
                        <div class="related-meeting-date">
                            <i class="bi bi-calendar3"></i>
                            Sep 30, 2025
                        </div>
                    </div>
                    <div class="related-meeting" onclick="window.location.href='/meeting/3'">
                        <div class="related-meeting-title">Product Roadmap Discussion</div>
                        <div class="related-meeting-date">
                            <i class="bi bi-calendar3"></i>
                            Oct 5, 2025
                        </div>
                    </div>
                    <div class="related-meeting" onclick="window.location.href='/meeting/4'">
                        <div class="related-meeting-title">Engineering Sprint Planning</div>
                        <div class="related-meeting-date">
                            <i class="bi bi-calendar3"></i>
                            Oct 8, 2025
                        </div>
                    </div>
                </div>

                <!-- Quick Actions Card -->
                <div class="sidebar-card slide-up" style="animation-delay: 0.4s">
                    <h4>
                        <i class="bi bi-lightning"></i>
                        Quick Actions
                    </h4>
                    <button class="quick-action-btn" onclick="exportToCalendar()">
                        <i class="bi bi-calendar-plus"></i>
                        Export to Calendar
                    </button>
                    <button class="quick-action-btn" onclick="sendEmail()">
                        <i class="bi bi-envelope"></i>
                        Email Summary
                    </button>
                    <button class="quick-action-btn" onclick="createSlack()">
                        <i class="bi bi-slack"></i>
                        Post to Slack
                    </button>
                </div>
            </aside>
        </div>

        <!-- Back to Meetings Link -->
        <div class="text-center mt-5">
            <a href="/meetings" class="back-link">
                <i class="bi bi-arrow-left me-2"></i>Back to Meetings
            </a>
        </div>
    </div>
</div>

<script>
    // Tab switching functionality
    document.querySelectorAll('.nav-pill').forEach(pill => {
        pill.addEventListener('click', function() {
            // Remove active class from all pills and panes
            document.querySelectorAll('.nav-pill').forEach(p => {
                p.classList.remove('active');
                p.setAttribute('aria-selected', 'false');
            });
            document.querySelectorAll('.tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });

            // Add active class to clicked pill and corresponding pane
            this.classList.add('active');
            this.setAttribute('aria-selected', 'true');
            const tabId = this.getAttribute('data-tab');
            document.getElementById(tabId).classList.add('active');
        });
    });

    // Font size control
    let currentFontSize = 16;
    function increaseFont() {
        currentFontSize += 2;
        document.getElementById('transcriptContent').style.fontSize = currentFontSize + 'px';
    }

    function decreaseFont() {
        if (currentFontSize > 12) {
            currentFontSize -= 2;
            document.getElementById('transcriptContent').style.fontSize = currentFontSize + 'px';
        }
    }

    function toggleMonospace() {
        const content = document.getElementById('transcriptContent');
        if (content.style.fontFamily === 'monospace') {
            content.style.fontFamily = 'Inter';
        } else {
            content.style.fontFamily = 'monospace';
        }
    }

    // Search functionality
    document.getElementById('searchInput').addEventListener('input', function(e) {
        const searchTerm = e.target.value.toLowerCase();
        document.querySelectorAll('.transcript-entry').forEach(entry => {
            const text = entry.textContent.toLowerCase();
            if (text.includes(searchTerm)) {
                entry.style.display = 'flex';
            } else {
                entry.style.display = 'none';
            }
        });
    });

    // Copy functions
    function copyParagraph(btn) {
        const text = btn.parentElement.querySelector('.text-content').textContent;
        navigator.clipboard.writeText(text).then(() => {
            btn.innerHTML = '<i class="bi bi-check-lg"></i>';
            setTimeout(() => {
                btn.innerHTML = '<i class="bi bi-clipboard"></i>';
            }, 2000);
        });
    }

    function copySummary() {
        const text = document.querySelector('.summary-text').textContent;
        navigator.clipboard.writeText(text).then(() => {
            showToast('Summary copied to clipboard!');
        });
    }

    function copyAll() {
        let allText = document.querySelector('.meeting-title').textContent + '\n\n';
        allText += 'TRANSCRIPT:\n' + document.querySelector('.transcript-content').textContent + '\n\n';
        allText += 'SUMMARY:\n' + document.querySelector('.summary-text').textContent;
        navigator.clipboard.writeText(allText).then(() => {
            showToast('All content copied to clipboard!');
        });
    }

    function downloadPDF() {
        window.print();
    }

    function shareMeeting() {
        const url = window.location.href;
        navigator.clipboard.writeText(url).then(() => {
            showToast('Meeting link copied to clipboard!');
        });
    }

    function confirmDelete() {
        if (confirm('Are you sure you want to delete this meeting? This action cannot be undone.')) {
            // Delete logic here
            window.location.href = '/meetings';
        }
    }

    function showToast(message) {
        // Simple toast notification
        const toast = document.createElement('div');
        toast.style.cssText = `
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1rem 2rem;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            z-index: 10000;
            animation: slideIn 0.3s ease;
        `;
        toast.textContent = message;
        document.body.appendChild(toast);
        setTimeout(() => {
            toast.style.animation = 'slideOut 0.3s ease';
            setTimeout(() => toast.remove(), 300);
        }, 3000);
    }

    // Keyboard navigation
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey || e.metaKey) {
            if (e.key === 'c' && e.shiftKey) {
                e.preventDefault();
                copyAll();
            }
        }
    });

    // Add active class to current nav link
    document.querySelectorAll('.nav-link').forEach(link => {
        const href = link.getAttribute('href');
        if (href && window.location.pathname.includes('meeting')) {
            link.classList.add('active');
        }
    });

    // Action Items Functions
    function toggleSelectAll() {
        const selectAll = document.getElementById('selectAll');
        const checkboxes = document.querySelectorAll('.item-checkbox');
        checkboxes.forEach(checkbox => {
            checkbox.checked = selectAll.checked;
        });
    }

    function markComplete() {
        const checkboxes = document.querySelectorAll('.item-checkbox:checked');
        if (checkboxes.length === 0) {
            showToast('Please select at least one item');
            return;
        }
        checkboxes.forEach(checkbox => {
            const row = checkbox.closest('.action-item-row');
            row.classList.add('completed');
            const select = row.querySelector('.status-select');
            select.value = 'Done';
        });
        showToast(`${checkboxes.length} item(s) marked as complete`);
    }

    function bulkAssign() {
        const checkboxes = document.querySelectorAll('.item-checkbox:checked');
        if (checkboxes.length === 0) {
            showToast('Please select at least one item');
            return;
        }
        const assignee = prompt('Assign to (initials):');
        if (assignee) {
            showToast(`${checkboxes.length} item(s) assigned to ${assignee}`);
        }
    }

    function bulkDeadline() {
        const checkboxes = document.querySelectorAll('.item-checkbox:checked');
        if (checkboxes.length === 0) {
            showToast('Please select at least one item');
            return;
        }
        const deadline = prompt('Set deadline (YYYY-MM-DD):');
        if (deadline) {
            showToast(`Deadline set for ${checkboxes.length} item(s)`);
        }
    }

    function exportSelected() {
        const checkboxes = document.querySelectorAll('.item-checkbox:checked');
        if (checkboxes.length === 0) {
            showToast('Please select at least one item');
            return;
        }
        
        let csvContent = 'Priority,Task,Assignee,Deadline,Status\n';
        checkboxes.forEach(checkbox => {
            const row = checkbox.closest('.action-item-row');
            const priority = row.querySelector('.priority-badge').textContent;
            const task = row.querySelector('.task-text').textContent;
            const assignee = row.querySelector('.assignee-name').textContent;
            const deadline = row.querySelector('.deadline span').textContent;
            const status = row.querySelector('.status-select').value;
            csvContent += `"${priority}","${task}","${assignee}","${deadline}","${status}"\n`;
        });

        const blob = new Blob([csvContent], { type: 'text/csv' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'action-items.csv';
        a.click();
        showToast('Action items exported successfully');
    }

    function editTask(btn) {
        const row = btn.closest('.action-item-row');
        const taskText = row.querySelector('.task-text');
        const currentText = taskText.textContent;
        const newText = prompt('Edit task:', currentText);
        if (newText && newText !== currentText) {
            taskText.textContent = newText;
            showToast('Task updated successfully');
        }
    }

    function deleteTask(btn) {
        if (confirm('Are you sure you want to delete this task?')) {
            const row = btn.closest('.action-item-row');
            row.style.animation = 'slideOut 0.3s ease';
            setTimeout(() => row.remove(), 300);
            showToast('Task deleted successfully');
        }
    }

    function addNewTask() {
        const task = prompt('Enter new task:');
        if (task) {
            showToast('New task added successfully');
            // In a real app, this would add a new row to the table
        }
    }

    // Checkbox functionality
    document.querySelectorAll('.custom-checkbox').forEach(checkbox => {
        checkbox.addEventListener('click', function() {
            const input = this.querySelector('input');
            input.checked = !input.checked;
            
            const row = this.closest('.action-item-row');
            if (input.checked) {
                row.classList.add('completed');
            } else {
                row.classList.remove('completed');
            }
        });
    });

    // Status change handler
    document.querySelectorAll('.status-select').forEach(select => {
        select.addEventListener('change', function() {
            const row = this.closest('.action-item-row');
            if (this.value === 'Done') {
                row.classList.add('completed');
                const checkbox = row.querySelector('.item-checkbox');
                checkbox.checked = true;
            } else {
                row.classList.remove('completed');
            }
            showToast('Status updated');
        });
    });

    // Sidebar Quick Actions
    function exportToCalendar() {
        showToast('Calendar export feature coming soon!');
    }

    function sendEmail() {
        showToast('Email sent successfully!');
    }

    function createSlack() {
        showToast('Posted to Slack successfully!');
    }

    // Topic tag filtering
    document.querySelectorAll('.topic-tag').forEach(tag => {
        tag.addEventListener('click', function() {
            const topic = this.textContent;
            showToast(`Filtering by: ${topic}`);
            // In a real app, this would filter transcript entries
        });
    });

    // Slide-up animation on scroll
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('slide-up');
            }
        });
    }, { threshold: 0.1 });

    document.querySelectorAll('.decision-card, .executive-summary, .meeting-insights').forEach(el => {
        observer.observe(el);
    });

    // Print styles for PDF export
    window.addEventListener('beforeprint', () => {
        document.querySelectorAll('.action-btn, .fab, .sidebar').forEach(el => {
            el.style.display = 'none';
        });
    });

    window.addEventListener('afterprint', () => {
        document.querySelectorAll('.action-btn, .fab, .sidebar').forEach(el => {
            el.style.display = '';
        });
    });
</script>

<style>
    /* Additional animation styles */
    @keyframes slideOut {
        to {
            opacity: 0;
            transform: translateX(-100%);
        }
    }

    /* Print styles */
    @media print {
        .action-btn,
        .fab,
        .sidebar,
        .nav-pills,
        .bulk-actions,
        .row-actions {
            display: none !important;
        }

        .results-layout {
            grid-template-columns: 1fr !important;
        }

        .tab-pane {
            display: block !important;
        }

        body {
            background: white !important;
            color: black !important;
        }
    }

    /* Focus indicators for accessibility */
    button:focus,
    a:focus,
    input:focus,
    select:focus {
        outline: 3px solid #667eea;
        outline-offset: 2px;
    }

    /* High contrast for dark mode */
    [data-theme="dark"] .text-content,
    [data-theme="dark"] .task-text,
    [data-theme="dark"] .summary-text {
        color: #e5e5e5;
    }

    [data-theme="dark"] .action-items-table {
        box-shadow: 0 0 30px rgba(102, 126, 234, 0.1);
    }

    [data-theme="dark"] .fab {
        box-shadow: 0 10px 30px rgba(102, 126, 234, 0.6), 0 0 40px rgba(102, 126, 234, 0.3);
    }

    /* Touch-optimized controls for mobile */
    @media (max-width: 768px) {
        .action-btn,
        .bulk-action-btn,
        .quick-action-btn {
            min-height: 44px;
            font-size: 1rem;
        }

        .custom-checkbox,
        .row-action-btn {
            min-width: 44px;
            min-height: 44px;
        }
    }
</style>
{% endblock %}
